<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple User CRUD – Tailwind</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800 antialiased">
  <header class="border-b bg-white">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="text-2xl font-semibold tracking-tight">User Management</h1>
      <div class="flex items-center gap-2">
        <a href="/users/criar"
          class="inline-flex items-center gap-2 rounded-xl bg-gray-100 px-3 py-2 text-sm font-medium hover:bg-gray-200">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4">
            <path
              d="M12 4.5a.75.75 0 0 1 .75.75v6h6a.75.75 0 0 1 0 1.5h-6v6a.75.75 0 0 1-1.5 0v-6h-6a.75.75 0 0 1 0-1.5h6v-6A.75.75 0 0 1 12 4.5Z" />
          </svg>

          Add User
        </a>
        <a href="/users/export"
          class="inline-flex items-center gap-2 rounded-xl bg-black text-white px-3 py-2 text-sm font-medium hover:bg-gray-800">
          Export
        </a>

      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <!-- Filters / Toolbar (static) -->
    <section class="mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
      <form class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3" method="GET" action="/users/lista">
        <div class="relative">
          <input type="text" name="search" placeholder="Search users..." value="<%= search %>"
            class="w-full rounded-2xl border border-gray-300 bg-white px-4 py-2.5 text-sm focus:outline-none focus:ring-4 focus:ring-gray-200" />
        </div>

        <select name="role"
          class="rounded-2xl border border-gray-300 bg-white px-3 py-2.5 text-sm focus:outline-none focus:ring-4 focus:ring-gray-200">
          <option value="">All Roles</option>
          <option value="ADMIN" <%=role==='ADMIN' ? 'selected' : '' %>>Admin</option>
          <option value="MANAGER" <%=role==='MANAGER' ? 'selected' : '' %>>Manager</option>
          <option value="EDITOR" <%=role==='EDITOR' ? 'selected' : '' %>>Editor</option>
          <option value="VIEWER" <%=role==='VIEWER' ? 'selected' : '' %>>Viewer</option>
        </select>

        <select name="status"
          class="rounded-2xl border border-gray-300 bg-white px-3 py-2.5 text-sm focus:outline-none focus:ring-4 focus:ring-gray-200">
          <option value="">Any Status</option>
          <option value="ACTIVE" <%=status==='ACTIVE' ? 'selected' : '' %>>Active</option>
          <option value="INACTIVE" <%=status==='INACTIVE' ? 'selected' : '' %>>Inactive</option>
          <option value="DELETED" <%=status==='DELETED' ? 'selected' : '' %>>Deleted</option>
          <option value="INVITED" <%=status==='INVITED' ? 'selected' : '' %>>Invited</option>
          <option value="SUSPENDED" <%=status==='SUSPENDED' ? 'selected' : '' %>>Suspended</option>
        </select>

        <select name="sort"
          class="rounded-2xl border border-gray-300 bg-white px-3 py-2.5 text-sm focus:outline-none focus:ring-4 focus:ring-gray-200">
          <option value="newest" <%=sort==='newest' ? 'selected' : '' %>>Sort: Newest</option>
          <option value="oldest" <%=sort==='oldest' ? 'selected' : '' %>>Sort: Oldest</option>
          <option value="az" <%=sort==='az' ? 'selected' : '' %>>Sort: A → Z</option>
          <option value="za" <%=sort==='za' ? 'selected' : '' %>>Sort: Z → A</option>
        </select>

        <button type="submit" class="rounded-xl bg-black text-white px-3 py-2 text-sm">Filter</button>
      </form>
    </section>
    <!-- Users Table -->
    <section class="bg-white border rounded-2xl shadow-sm">
      <div class="overflow-x-auto rounded-2xl">
        <table class="min-w-full text-left align-middle">
          <thead class="bg-gray-50 text-xs uppercase tracking-wider text-gray-500">
            <tr>
              <th class="px-4 py-3">User</th>
              <th class="px-4 py-3">Email</th>
              <th class="px-4 py-3">Role</th>
              <th class="px-4 py-3">Status</th>
              <th class="px-4 py-3">Created</th>
              <th class="px-4 py-3 text-right">Actions</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100">
            <% dados.forEach(user=> { %>
              <tr class="hover:bg-gray-50">
                <td class="px-4 py-3">
                  <div class="flex items-center gap-3">
                    <span
                      class="inline-flex size-9 items-center justify-center rounded-full bg-indigo-100 text-indigo-700 text-sm font-semibold">
                      <%= user.name.charAt(0) %>
                        <%= user.username.charAt(1) || "" %>
                    </span>
                    <div>
                      <div class="font-medium">
                        <%= user.name %>
                      </div>
                      <div class="text-xs text-gray-500">
                        <%= user.username %>
                      </div>
                    </div>
                  </div>
                </td>
                <td class="px-4 py-3">
                  <%= user.email %>
                </td>
                <td class="px-4 py-3">
                  <span class="inline-flex items-center rounded-full bg-gray-100 px-2.5 py-1 text-xs font-medium">
                    <%= user.role %>
                  </span>
                </td>
                <td class="px-4 py-3">
                  <span
                    class="inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium <% if (user.status === 'ACTIVE') { %> bg-green-100 <% } else if (user.status === 'INACTIVE') { %> bg-gray-100 <% } else if (user.status === 'DELETED') { %> bg-red-100 <% } else { %> bg-orange-100 <% } %>">
                    <%= user.status %>
                  </span>
                </td>
                <td class="px-4 py-3 text-sm text-gray-600">
                  <%= user.createdAt %>
                </td>
                <td class="px-4 py-3">
                  <div class="flex items-center justify-end gap-2">
                    <a href="/users/edit/<%= user.id %>"
                      class="rounded-xl border px-3 py-1.5 text-sm hover:bg-gray-50">Edit</a>
                    <a href="/users/delete/<%= user.id %>"
                      class="rounded-xl bg-red-50 px-3 py-1.5 text-sm text-red-700 hover:bg-red-100">Delete</a>
                  </div>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
      </div>
      <!-- Pagination (static) -->
      <div class="flex items-center justify-between px-4 py-3 border-t bg-gray-50">
        <p class="text-sm text-gray-600">
          Showing <span class="font-medium">
            <%= (page-1)*10+1 %>–<%= Math.min(page*10, dados.length) %>
          </span> of
          <span class="font-medium">
            <%= totalUsers %>
          </span> users
        </p>
        <nav class="inline-flex items-center gap-1">
          <% if (page> 1) { %>
            <a href="?page=<%= page-1 %>&search=<%= search %>&role=<%= role %>&status=<%= status %>&sort=<%= sort %>"
              class="rounded-xl border px-3 py-1.5 text-sm hover:bg-gray-100">Previous</a>
            <% } %>

              <% for(let p=1; p <=totalPages; p++) { %>
                <a href="?page=<%= p %>&search=<%= search %>&role=<%= role %>&status=<%= status %>&sort=<%= sort %>"
                  class="rounded-xl <%= p===page ? 'bg-black text-white' : 'border' %> px-3 py-1.5 text-sm hover:bg-gray-100">
                  <%= p %>
                </a>
                <% } %>

                  <% if (page < totalPages) { %>
                    <a href="?page=<%= page+1 %>&search=<%= search %>&role=<%= role %>&status=<%= status %>&sort=<%= sort %>"
                      class="rounded-xl border px-3 py-1.5 text-sm hover:bg-gray-100">Next</a>
                    <% } %>
        </nav>
      </div>

    </section>

    <!-- User Form (static, no JS) -->
  </main>

  <footer class="max-w-6xl mx-auto px-4 py-10 text-center text-xs text-gray-500">
    Built with Tailwind CSS – no JavaScript included.
  </footer>
</body>

</html>